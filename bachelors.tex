\documentclass[12pt,a4paper]{article} % Maybe use 'report' ???
% REMEMBER TO REMOVE THE 'draft' TAG!
\usepackage{polyglossia}	% XeTeX multi-lingual support
\usepackage{fontspec}		% The XeTeX font spec package
\usepackage{xunicode}		% XeTeX Unicode character support
\usepackage{xltxtra}		% Umm something else XeTeX

\usepackage[intlimits]{amsmath}	% Math stuff
%\usepackage{pdftexcmds} % pdf macros: needed for listingsutf8
\usepackage{listings}	% Package for code formatting
\usepackage[dvipsnames]{xcolor}
%\include{/home/johnlm/code/avr_assembler_listing_def.tex}
%\input{avr_assembler_listing_def.tex}
%\renewcommand{\lstlistingname}{Koda bloks}
\usepackage{longtable}	% Package for tables split accross pages
\usepackage{booktabs}	% Package for nicer tables
\usepackage{enumerate}
\usepackage[toc,title,titletoc]{appendix}
%\usepackage{wrapfig}
\usepackage{cite}	% Superscript cites
\usepackage{rotating}	% Package for landscape figures
\usepackage{indentfirst}	%Indent first paragraph too
\usepackage{setspace}	% Line spacing package
\usepackage[perpage,symbol*,bottom]{footmisc}	% Resets footnote marks per page
%NOTE: footmisc must load AFTER setspace
\usepackage{fancyhdr}	% Fancy header/footer package
\usepackage{placeins}
\usepackage[figurewithin=section,tablewithin=section]%
	{caption}	% Package for configuring captions format
\usepackage[a4paper,xetex,top=20mm, bottom=22mm, left=35mm, right=20mm]%
%\usepackage[a4paper,top=22mm, bottom=25mm, left=35mm, right=20mm]% DEBUG
	{geometry}

% Preamble formatting settings defined included from external file
\input{pre.settings.tex}
\input{pre.special.tex}

% Hyperref package for links in PDF (should be last package)
\usepackage[hyperfootnotes=false,linkbordercolor={blue},hyperindex]{hyperref}
\hypersetup{pdftitle={Iekļautās sistēmas mikrokontroliera kodola izstrāde}}
\hypersetup{pdfauthor={Jānis Šmēdiņš}}

\usepackage{fixlatvian}	% Fixes for Latvian typography rules


% \onehalfspacing

% Chardump: „” em— en– fig‒ “”
\begin{document}
	% Titullapa
	\pagestyle{empty}
	\input{titullapa.tex} % Ielikt titullapu
	\stepcounter{page} %Palielināt lapu skaitītāju (jeb ieskaitīt titullapu)
	
	%% Number listings within section
	% Add section number to caption
	\renewcommand{\thelstlisting}{\thesection.\arabic{lstlisting}}
	% Redefine \section to reset the lstlisting counter
	\let\oldSection\section
	\renewcommand\section{\setcounter{lstlisting}{0}\oldSection}
	
	%\renewcommand{\contentsname}%
	%	{\vspace*{-12mm}\section*{Saturs}\vspace*{-6mm}}
	\tableofcontents
	%\addcontentsline{toc}{section}{Saturs}	% Saturs ir saturaa?
	
	\clearpage
	\sloppy %Don't care too much about rigid formatting
	\onehalfspacing % 1.5 spacing
	
	% Termini
		% Seriālā, paralēlā datu pāraide
		% Mikrokontrolieris, uC
		% FPGA
		% SPI
		% ALU
		% boot
	
	\input{abstract.tex}
	
	% Ievads
	\clearpage
	\pagestyle{plain} % Start the proper page numbering
	\input{ievads.tex} % TODO: Rewrite this bugger
	
	% Teorija
	\clearpage
	\input{hdl.tex}
	
	\clearpage
	\input{platform.tex}
	
	\clearpage
	\input{perry.tex}
	
	% Praktiskā daļa
	\clearpage
	\input{core.tex} % Kodola uzbūve perifērija
	
	\clearpage
	\input{periph.tex} % Sistēmas perifērija
	
	\clearpage
	\input{tools.tex}
	
	% Literatūras saraksts
	\bibliographystyle{ieeetr}
	%\renewcommand{\refname}%
	%	{\vspace*{-12mm}\section*{Izmantotā literatūra}\vspace*{-6mm}}
	\clearpage
	%\pagestyle{empty}
	{\raggedright
	\begin{thebibliography}{9}
		\addcontentsline{toc}{section}{\refname}
		\bibitem{VHSIC}
			Creasey~D.J.,
			\textit{Advanced Signal Processing}.\linebreak[1]
			London: Peter~Peregrinus, 1985. ISBN~0-86341-037-5
		
		\bibitem{Flynn-arch}
			%Michael J.~Flynn,
			Flynn~M.J.,
			\textit{Computer Architecture: Pipelined and Parallel Processor Design}.
			\linebreak[3]
			London: Jones~and~Bartlett, 1995. ISBN~0-86720-204-1
		
		\bibitem{Heath}
			%Steve Heath,
			Heath~S.,
			\textit{Embedded systems design}, 2\nd edition.\linebreak[3]
			Oxford: Newnes, 2003. ISBN~0-7506-5541-1
		
		\bibitem{VITAL}
			IEEE,
			\textit{IEEE 1076.4/D1, DRAFT Standard, VITAL ASIC Modeling Specification}.
			New York: IEEE, 2000.
		
		\bibitem{ieee-1364.1}
			IEEE,
			\textit{IEEE Std. 1364.1-2002, IEEE Standard for Verilog Register Transfer Level Synthesis}.
			New York: IEEE, 2002.
		
		\bibitem{Mealy-VHDL}
			%Bryan Mealy, Fabrizio Tappero,
			Mealy~B., Tappero~F.,
			\textit{Free Range VHDL}.
			2012. [tiešsaiste] \linebreak[2]
			Pieejams: \url{http://www.freerangefactory.org/dl/free_range_vhdl.pdf}\linebreak[2]
			\mbox{[skatīts on 2012.~gada 2.~maijā]}
		
		\bibitem{HDL}
			%Gaurav Mehta, Sridhar Kintali,
			Mehta~G., Kintali~S.,
			\textit{Hardware Description Languages}.\linebreak[2]
			Santa Barbra: University of California,
			2009.
		
		%\bibitem{von-Neumann}
		%	John von Neumann,
		%	\textit{First Draft of a Report on the EDVAC},\linebreak[2]
		%	University of Pennsylvania, 1945.
		
		\bibitem{Perry-VHDL}
			%Douglas L.~Perry,
			Perry~D.L.,
			\textit{VHDL: Programming by Example}, 4\nth edition. \linebreak[2]
			New York: McGraw-Hill, 2002. ISBN~0-07-140070-2
		
		\bibitem{Vivek-Verilog}
			%Vivek Sagadeo,
			Sagdeo~V.,
			\textit{The Complete Verilog Book}.\linebreak[2]
			Norwell: Kluwer Academic Publishers, 1998. ISBN~0-7923-8188-2
		
		\bibitem{vhdl-vs-verilog}
			Smith~D.J.,
			\textit{VHDL \& Verilog Compared \& Contrasted}. [tiešsaiste]\linebreak[2]
			Pieejams: \url{http://www.angelfire.com/in/rajesh52/verilogvhdl.html}
			\mbox{[skatīts on 2012.~gada 21.~maijā]}
		
		\bibitem{Kumar-Verilog}
			% Deepak Kumar Tala,
			Tala~D.K., \textit{Gate Level Modeling}. [tiešsaiste]\linebreak[2]
			Pieejams: \url{http://www.asic-world.com/verilog/gate.html}
			\mbox{[skatīts on 2012.~gada 24.~maijā]}
		
		\bibitem{Vahid-RTL}
			%Frank Vahid,
			Vahid~F.,
			\textit{Digital Design with RTL Design, VHDL, and Verilog}, 2\nd edition.\linebreak[2]
			New York: % Hell knows which city
			John Wiley \& Sons, 2011. ISBN~978-0-470-53108-2
		
		\bibitem{FusionGuide}
			Actel corp.,
			\textit{Fusion Embedded Development Kit User's Guide}. %\linebreak[2]
			%USA: Actel,
			2009.
		
		\bibitem{FlashROM}
			Actel corp.,
			\textit{Fusion FlashROM}, Application Note AC236. %\linebreak[2]
			%USA: Actel,
			2005.
		
		\bibitem{RAM4K9}
			Actel corp.,
			\textit{Fusion SRAM/FIFO Blocks}, Application Note AC237. %\linebreak[2]
			%USA: Actel,
			2005.
		
		\bibitem{FusionFAQ}
			Actel corp.,
			\textit{Synplify — Synthesis Frequently Asked Questions}. %\linebreak[2]
			%USA: Actel,
			2009.
		
		\bibitem{SmartFusionFabric}
			Microsemi corp.,
			\textit{SmartFusion FPGA Fabric User's Guide}.
			%USA: Microsemi,
			2011.
		
		\bibitem{Xilinx7}
			Xilinx,
			\textit{7 Series FPGAs Overview}.
			%USA: Xilinx,
			2012.
	\end{thebibliography}
	} % "End of \raggedright"
	
	\clearpage
	\input{galvojums.tex}
	
	\clearpage
	%\phantomsection\addcontentsline{toc}{section}{\appendixtocname}
	%\appendix
	\begin{appendices} % Pielikumu sākas šeit
	%\addappheadtotoc
	%\appendixtocname % Pievienot vārdu 'Pielikums' pie numura
	\input{appendices.tex}
	\end{appendices}
	
	\clearpage
	\input{veerteejums.tex}
	
	
\end{document}
